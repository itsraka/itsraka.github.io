!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=27)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e){this.criteria=t,this.empty=e}isEmpty(){return this.empty}getCriteria(){return this.criteria}}e.FilledFilterState=function(t){return new i(t,!1)},e.EmptyFilterStateObject=new i([],!0)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(7);class r{constructor(t,e){this.state=t,this.matcher=e}getState(){return this.state}getMatcher(){return this.matcher}}e.FilterStateMatcher=r,e.NullFilterStateMatcherObject=new r(i.EmptyFilterStateObject,new n.SameMatcher)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAliasMap=function(t){const e={};for(let s=0;s<t.length;s++)e[t[s]]=!0;return e}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(4);e.ApiClient=class{constructor(t){this.url=t}data(t,e){fetch(this.url).then(t=>t.json()).then(t).catch(e)}};e.SyncState=class{constructor(t){this.completeHandler=t,this.map=null,this.data=null}setMap(t){this.map=t,this.sync()}setData(t){this.data=t,this.sync()}sync(){null!==this.map&&null!==this.data&&(0,this.completeHandler)(this.data,this.map)}};class n{constructor(){this.loaded=!1,this.handler=null}handle(){if(null===this.handler)this.loaded=!0;else{(0,this.handler)()}}on(t){this.loaded?t():this.handler=t}}e.LoadHandler=n,e.createSyncHandler=function(){const t=new n,e=function(){t.handle()};return e.on=function(e){t.on(e)},e},e.getCheckedAliases=function(t){const e=[];return t.each(function(){const t=$(this),s=t.attr("data-alias");t.is(":checked")&&e.push(s)}),e};e.CacheDataViewerDecorator=class{constructor(t){this.viewer=t,this.result=null}render(t){t!==this.result&&(this.result=t,this.viewer.render(t))}};class r{render(t){}openEventConsume(t){}}e.EmptyMapViewer=r;const a=3;class o{constructor(t){this.list=[],this.maxSize=t}add(t){this.list.push(t),this.list.length>this.maxSize&&this.list.shift().close()}clear(){this.list=[]}close(){for(let t=0;t<this.list.length;t++){this.list[t].close()}this.clear()}}class c{constructor(t,e){this.dataMarker=t,this.mapMarker=e}}class l{constructor(t,e,s){this.locationGrouper=t,this.dataMarkerConstructor=e,this.map=s,this.markers=[],this.infoWindowController=new o(a)}render(t){this.clear();const e=this.locationGrouper.group(t.getResult()),s=e.getMap(),i=this.dataMarkerConstructor;for(let t in s)if(s.hasOwnProperty(t))for(let n in s[t])if(s[t].hasOwnProperty(n)){const s=new i(e.fetch(t,n)),r=new google.maps.LatLng(t,n),a=new google.maps.Marker({position:r,map:this.map,title:s.getTitle()});this.addClickListener(a,s);const o=new c(s,a);this.markers.push(a),this.containerMap.set(t,n,o)}}openEventConsume(t){const e=this.containerMap.fetch(t.location.latitude,t.location.longitude);this.infoWindowController.close(),this.open(e.mapMarker,e.dataMarker)}addClickListener(t,e){google.maps.event.addListener(t,"click",this.open.bind(this,t,e))}open(t,e){const s=new google.maps.InfoWindow({content:e.getContent()});s.open(this.map,t),this.infoWindowController.add(s)}clear(){for(let t=0;t<this.markers.length;t++){const e=this.markers[t];e.setMap(null),google.maps.event.clearListeners(e,"click")}this.markers=[],this.containerMap=new i.LocationMap,this.infoWindowController.clear()}}e.MapViewerManager=class{constructor(t,e){this.locationGrouper=t,this.markerConstructor=e,this.mapViewer=new r,this.map=null}setMap(t){this.mapViewer=new l(this.locationGrouper,this.markerConstructor,t),this.map=t}render(t){this.mapViewer.render(t)}openEventConsume(t){this.setCenter(t.location),this.mapViewer.openEventConsume(t)}setCenter(t){null!==this.map&&this.map.setCenter(new google.maps.LatLng(t.latitude,t.longitude))}};e.StatsViewer=class{render(t){}};e.EmptyCloseComponent=class{close(){}};e.AutocompletedCheckboxListView=class{constructor(t,e){const s=this;this.$element=t,this.componentAlias=e,this.aliasMap={},t.on("click",".js-remove",function(t){const e=$(t.target).closest("p"),i=$("input",e).attr("data-alias");e.remove(),s.remove(i)})}addChecked(t,e){this.aliasMap.hasOwnProperty(e)||(this.$element.append(this.renderCheckbox(t,e,!0)),this.aliasMap[e]=!0)}render(t,e){if(null===e)return;const s=[];for(let i=0;i<t.length;i++){const n=t[i];e.hasOwnProperty(n.alias)&&(s.push(this.renderCheckbox(n.name,n.alias,!0===e[n.alias])),this.aliasMap[n.alias]=!0)}this.$element.append(s.join(""))}renderCheckbox(t,e,s){let i="";s&&(i="checked");const n=`js-${this.componentAlias}-input-${e}`;return`<p>\n    <label for="${n}">\n        <input type="checkbox" id="${n}" ${i} data-alias="${e}" />\n        <span>${t} <span class="badge js-remove">x</span></span>\n    </label>\n</p>`}remove(t){delete this.aliasMap[t]}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LocationListMap=class{constructor(){this.map={}}add(t,e,s){this.map[t]=this.map[t]||{},this.map[t][e]=this.map[t][e]||[],this.map[t][e].push(s)}getMap(){return this.map}fetch(t,e){return this.map[t][e]}};e.LocationMap=class{constructor(){this.map={}}set(t,e,s){this.map[t]=this.map[t]||{},this.map[t][e]=s}getMap(){return this.map}fetch(t,e){return this.map[t][e]}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Location=class{constructor(t,e){this.latitude=t,this.longitude=e}},e.distance=function(t,e){const s=t.latitude-e.latitude,i=t.longitude-e.longitude;return s*s+i*i}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CheckboxComponent=class{constructor(t,e){this.$element=t,"1"===e&&this.$element.attr("checked","checked")}checked(){return this.$element.is(":checked")}criteria(){return"1"}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SameMatcher=class{match(t){return!0}};e.MergeMatcher=class{constructor(t,e){this.source=t,this.next=e}match(t){return this.source.match(t)&&this.next.match(t)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(0),n=s(9);class r{constructor(t,e){this.filterState=t,this.modifier=e}getState(){return this.filterState}getModifier(){return this.modifier}}e.FilterStateModifier=r,e.NullFilterStateModifierObject=new r(i.EmptyFilterStateObject,new n.SameModifier)},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SameModifier=class{modify(t){return t}};e.MergeModifier=class{constructor(t,e){this.source=t,this.next=e}modify(t){const e=this.source.modify(t);return null===e?null:this.next.modify(e)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e,s){this.aliasStateMap=t,this.selected=e,this.disabled=s}}e.AliasStateMap=i,e.createAliasStateMapByCheckboxes=function(t){const e=[],s=[],n={};return t.each(function(){const t=$(this),i=t.attr("data-alias"),r=t.is(":checked");n[i]=r,r?e.push(i):s.push(i)}),new i(n,e,s)}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(2);class n{constructor(t){this.aliasMap=i.createAliasMap(t)}}e.MultiSelectMatcher=n;e.SameAliasMatcher=class extends n{constructor(t,e){super(t),this.state=e}match(t){return this.aliasMap.hasOwnProperty(t.alias)===this.state}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.IdentityCriteriaConverter=class{unmarshal(t){return t}marshal(t){return t}};e.RangeCriteriaConverter=class{constructor(){this.delimiter="-"}unmarshal(t){const e=t.split(this.delimiter),s=parseInt(e[0],10);if(2===e.length){const t=parseInt(e[1],10);return t>0&&t>=s?{from:s,to:t}:null}return s>0?{from:s,to:0}:0}marshal({from:t,to:e}){const s=[t];return e>0&&s.push(e),s.join(this.delimiter)}};e.MultiSelectCriteriaConverter=class{constructor(){this.delimiter=","}unmarshal(t){return""!==t?t.split(this.delimiter):null}marshal(t){return 0===t.length?"":t.join(this.delimiter)}};e.MultiCheckboxCriteriaConverter=class{constructor(){this.suffix="-unchecked"}unmarshal(t){if(""!==t){const e=t.split(","),s={};for(let t=0;t<e.length;t++){const i=e[t];i.endsWith(this.suffix)?s[i.substring(0,i.length-this.suffix.length)]=!1:s[i]=!0}return s}return null}marshal(t){const e=[];for(let s in t)if(t.hasOwnProperty(s)){const i=t[s];!0===i?e.push(s):!1===i?e.push(s+this.suffix):console.error(`wrong state for "${s}" = "${i}"`)}return e.join(",")}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UniqueKeyChecker=class{constructor(){this.map={},this.list=[]}unique(t){if(this.map.hasOwnProperty(t))throw new Error(`already exists: ${t}`);return this.map[t]=!0,this.list.push(t),t}keys(){return this.list}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(5),n=s(15),r="center";e.UrlStateContainer=class{constructor(t,e,s,i){!function(t,e){for(let s=0;s<t.length;s++){const i=t[s];if(!e.hasOwnProperty(i))throw new Error(`missing converter for "${i}"`)}}(s,i),this.centerDefined=!1,this.center=t.center,this.zoom=t.zoom,this.centerSetter=null;const a=new URLSearchParams(window.location.search.substring(1));if(a.has(r)){const t=function(t){if(t){const[e,s,i]=t.trim().split(","),n=parseFloat(e),r=parseFloat(s),a=parseFloat(i);if(n>0&&r>0&&a>0)return[n,r,a]}return null}(a.get(r));if(t){const[e,s,i]=t;this.centerDefined=!0,this.center={latitude:e,longitude:s},this.zoom=i}}this.buildCriteriaMap(this.parseCriteriaMap(a,s,i)),this.debounce=new n.Debounce(e),this.lazyUpdateHandler=this.update.bind(this),this.tryRealGeoLocation()}addCenterSetter(t){this.centerSetter=t}getCenter(){return this.center}setCenter(t){this.center=t,this.lazyUpdate()}tryRealGeoLocation(){var t;this.centerDefined||(t=this,window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(function(e){t.setRealCenter(new i.Location(e.coords.latitude,e.coords.longitude))}))}setRealCenter(t){this.centerDefined||(this.setCenter(t),null!==this.centerSetter&&this.centerSetter.setCenter(t))}getZoom(){return this.zoom}setZoom(t){this.zoom=t,this.lazyUpdate()}getCriteriaByName(t,e=null){return this.criteriaMap.hasOwnProperty(t)?this.criteriaMap[t]:e}setCriteriaMap(t){this.buildCriteriaMap(t),this.update()}buildCriteriaMap(t){const e=[];for(let s in t)if(t.hasOwnProperty(s)){const i=this.criteriaNameConverterMap[s];e.push("&"+s+"="+encodeURIComponent(i.marshal(t[s])))}this.criteriaMap=t,this.criteria=e.join("")}parseCriteriaMap(t,e,s){this.criteriaNameConverterMap=s;const i={};for(let n=0;n<e.length;n++){const r=e[n];if(t.has(r)){const e=s[r],n=decodeURIComponent(t.get(r)).trim();if(""!==n){const t=e.unmarshal(n);null!==t&&(i[r]=t)}}}return i}lazyUpdate(){this.debounce.handle(this.lazyUpdateHandler)}update(){const t=this.center.latitude+","+this.center.longitude+","+this.zoom,e=window.location.pathname+"?"+r+"="+t+this.criteria;window.history.pushState(null,"",e),window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"Pageview",url:e})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Debounce=class{constructor(t){this.delay=t,this.timerId=0}handle(t){clearTimeout(this.timerId),this.timerId=setTimeout(t,this.delay)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(6),n=s(0),r=s(1);e.CheckboxFilterMatchBuilder=class{constructor(t,e,s){this.checkbox=new i.CheckboxComponent(t,e),this.className=s}build(){if(this.checkbox.checked()){const t=this.className;return new r.FilterStateMatcher(n.FilledFilterState(this.checkbox.criteria()),new t)}return r.NullFilterStateMatcherObject}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(6),n=s(0),r=s(8);e.CheckboxStateModifierBuilder=class{constructor(t,e,s){this.checkbox=new i.CheckboxComponent(t,e),this.className=s}build(){if(this.checkbox.checked()){const t=this.className;return new r.FilterStateModifier(n.FilledFilterState(this.checkbox.criteria()),new t)}return r.NullFilterStateModifierObject}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(7),n=s(9);class r{constructor(t={}){this.criteriaMap=t}getCriteriaMap(){return this.criteriaMap}}e.FilterContainer=r;class a{constructor(){this.map={},this.exists=!1}add(t,e){this.map[t]=e,this.exists=!0}isExists(){return this.exists}getMap(){return this.map}}e.FilterContainerBuilder=class{constructor(t,e){this.matcherBuilderMap=t,this.modifierBuilderMap=e}build(){const t=new a;let e=new i.SameMatcher;for(let s in this.matcherBuilderMap)if(this.matcherBuilderMap.hasOwnProperty(s)){const n=this.matcherBuilderMap[s].build(),r=n.getState();if(r.isEmpty())continue;t.add(s,r.getCriteria()),e=new i.MergeMatcher(e,n.getMatcher())}let s=new n.SameModifier;for(let e in this.modifierBuilderMap)if(this.modifierBuilderMap.hasOwnProperty(e)){const i=this.modifierBuilderMap[e].build(),r=i.getState();if(r.isEmpty())continue;t.add(e,r.getCriteria()),s=new n.MergeModifier(s,i.getModifier())}return t.isExists()?new c(t.getMap(),e,s):new o}};class o extends r{filter(t){return t}}class c extends r{constructor(t,e,s){super(t),this.matcher=e,this.modifier=s}filter(t){const e=[];for(let s=0;s<t.length;s++){const i=t[s];if(this.matcher.match(i)){const t=this.modifier.modify(i);null!==t&&e.push(t)}}return e}}e.FilledFilterContainer=c},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GroupMarker=class{constructor(t){this.list=t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.EmptyFilterViewBuilder=class{build(t){}};e.CallbackFilterViewBuilder=class{constructor(t){this.handler=t}build(t){(0,this.handler)(t)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(10),n=s(11),r=s(0),a=s(1);e.AliasFilterStateMatcherBuilder=class{constructor(t){this.$element=t}build(){const t=i.createAliasStateMapByCheckboxes($("input",this.$element));return t.selected.length>0?new a.FilterStateMatcher(r.FilledFilterState(t.aliasStateMap),new n.SameAliasMatcher(t.selected,!0)):t.disabled.length>0?new a.FilterStateMatcher(r.FilledFilterState(t.aliasStateMap),new n.SameAliasMatcher(t.disabled,!1)):a.NullFilterStateMatcherObject}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SubmitAction=class{constructor(t){this.handler=t}submit(){this.handler()}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor({shown:t=!1,loaded:e=!1,submit:s=!1,empty:i=!1,count:n=0}={}){this.shown=t,this.loaded=e,this.submit=s,this.empty=i,this.count=n}}e.ResultCountProps=i;e.ResultCountComponent=class{constructor(t){this.$hint=$("#js-count-hint"),this.$loader=$(".js-count-loader",this.$hint),this.$count=$(".js-count-result",this.$hint),this.$empty=$(".js-empty",this.$hint),this.$submit=$(".js-submit",this.$hint),$(".js-close",this.$hint).click(()=>this.hide()),this.$submit.click(()=>{t.submit(),this.hide()})}setTop(t){this.$hint.css("top",t)}showCount(t){this.render(new i({shown:!0,submit:t>0,empty:0===t,count:t}))}render(t){this.$hint.toggleClass("shown",t.shown),this.$loader.toggleClass("loader",t.loaded),this.$count.html(t.count),this.$empty.toggle(t.empty),this.$submit.toggle(t.submit)}hide(){this.render(new i)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(3),n=s(25);var r;window.initializeMap=i.createSyncHandler(),function(t){t[t.GoogleMap=0]="GoogleMap",t[t.ResultList=1]="ResultList"}(r||(r={}));e.Application=class{constructor(t,e,s,a,o,c,l,u){this.urlStateContainer=t,this.dataViewer=s,this.mapViewer=e,this.statsViewer=a,this.apiClient=o,this.archiver=c,this.filterContainerBuilder=l,this.filterViewBuilder=u,this.searcherManager=new n.SearcherManager(new n.NullSearcher),this.resultContainer=this.searcherManager.search();const h=new i.CacheDataViewerDecorator(e);this.tabDataViewerMap={[r.GoogleMap]:h,[r.ResultList]:new i.CacheDataViewerDecorator(s)},this.selectedDataViewer=h,this.dataViewer.setOpenEventPublisher(this),this.urlStateContainer.addCenterSetter(e)}start(){const t=this,e=this.urlStateContainer,s=this.mapViewer,r=this.archiver,a=this.apiClient,o=this.filterContainerBuilder,c=this.filterViewBuilder,l=this.searcherManager,u=new i.SyncState(function(e,i){const a=r.unzip(e);c.build(a),l.setSearcher(new n.FilledSearcher(a,o)),s.setMap(i),t.initializeSearchAndRender()});a.data(function(t){u.setData(t)},console.error),window.initializeMap.on(function(){const t=e.getCenter(),s={zoom:e.getZoom(),center:new google.maps.LatLng(t.latitude,t.longitude),mapTypeId:google.maps.MapTypeId.TERRAIN,mapTypeControl:!1},i=new google.maps.Map(document.getElementById("js-google-map"),s);u.setMap(i),i.addListener("center_changed",function(){const t=i.getCenter();e.setCenter({latitude:t.lat(),longitude:t.lng()})}),i.addListener("zoom_changed",function(){e.setZoom(i.getZoom())})})}initializeSearchAndRender(){this.search(),this.render(this.resultContainer)}searchAndRender(){this.search();const t=this.resultContainer;this.render(t),this.urlStateContainer.setCriteriaMap(t.getCriteriaMap())}searchAndCount(){return this.search(),this.resultContainer.getCount()}search(){this.resultContainer=this.searcherManager.search()}renderAfterSearch(){const t=this.resultContainer;this.render(t),this.urlStateContainer.setCriteriaMap(t.getCriteriaMap())}selectResultTab(){this.changeTab(r.ResultList)}selectGoogleMapTab(){this.changeTab(r.GoogleMap)}openEventPublish(t){M.Tabs.getInstance($("#js-tabs")).select("gmap"),this.selectGoogleMapTab(),this.mapViewer.openEventConsume(t),this.urlStateContainer.setCenter(t.location)}changeTab(t){if(this.tabDataViewerMap.hasOwnProperty(t)){this.selectedDataViewer=this.tabDataViewerMap[t];const e=this.resultContainer;this.renderSelectedTab(e)}}render(t){this.renderSelectedTab(t),this.statsViewer.render(t)}renderSelectedTab(t){this.selectedDataViewer.render(t)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(26);e.FilledSearcher=class{constructor(t,e){this.source=t,this.filterContainerBuilder=e}search(){const t=Date.now(),e=this.filterContainerBuilder.build(),s=e.filter(this.source),n=Date.now()-t;return new i.ResultContainer(s,e.getCriteriaMap(),n)}};e.NullSearcher=class{search(){return new i.ResultContainer([],{},0)}};e.SearcherManager=class{constructor(t){this.searcher=t}search(){return this.searcher.search()}setSearcher(t){this.searcher=t}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ResultContainer=class{constructor(t,e,s){this.result=t,this.criteriaMap=e,this.duration=s}getCount(){return this.result.length}getResult(){return this.result}getDuration(){return this.duration}getCriteriaMap(){return this.criteriaMap}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s(3),n=s(12),r=s(13),a=s(14),o=s(16),c=s(17),l=s(0),u=s(18),h=s(1),d=s(8),p=s(4),m=s(19),f=s(20),w=s(21),y=s(22),g=s(23),C=s(11),b=s(5),v=s(28),S=s(2),j=s(10),k=s(24);$(document).ready(function(){const t=27,e=13,s=new r.UniqueKeyChecker,o=s.unique("vacancy-query"),c=s.unique("vacancy-city"),l=s.unique("company-review"),h=s.unique("company"),d=s.unique("vacancy-newest"),p=s.unique("vacancy-salary"),m=s.unique("company-size"),C=s.unique("company-type"),b=new n.MultiCheckboxCriteriaConverter,v=new n.IdentityCriteriaConverter,S=new n.MultiSelectCriteriaConverter,j=new a.UrlStateContainer({center:{latitude:50.4435158,longitude:30.5030242},zoom:14},500,s.keys(),{[l]:v,[o]:v,[h]:b,[c]:b,[d]:v,[p]:new n.RangeCriteriaConverter,[m]:S,[C]:S}),F=$("#js-vacancy-autocomplete"),P=$("#js-company-autocomplete"),A=$("#js-city-autocomplete"),N=$("#js-review-exists"),B=$("#js-vacancy-newest"),L=$("#js-nearest-center-companies"),R=$("#js-selected-companies"),V=$("#js-selected-cities"),E=$("#js-salary-from"),T=$("#js-salary-to"),D=$("#js-company-size-filter input"),z=$("#js-company-type-filter input"),I=new i.AutocompletedCheckboxListView(R,"company"),G=new i.AutocompletedCheckboxListView(V,"city");let q=new i.EmptyCloseComponent;const U=new k.Application(j,new i.MapViewerManager(new _,O),new lt(L,j),new ot($("#js-result-vacancy-count"),$("#js-result-company-count"),$("#js-result-show-time")),new i.ApiClient(COMPANIES_DATA_JSON),new x,new u.FilterContainerBuilder({[l]:new J(N,j.getCriteriaByName(l)),[h]:new w.AliasFilterStateMatcherBuilder(R),[m]:new Y(D,j.getCriteriaByName(m)),[C]:new Q(z,j.getCriteriaByName(C))},{[c]:new st(V),[o]:new tt(F,j.getCriteriaByName(o)),[d]:new rt(B,j.getCriteriaByName(d)),[p]:new at(E,T,j.getCriteriaByName(p,{}))}),new f.CallbackFilterViewBuilder(function(t){const e=new ct(t);F.autocomplete({data:e.getVacancyNameMap(),onAutocomplete:function(t){U.searchAndRender()}}),q=M.Autocomplete.getInstance(F),P.autocomplete({data:e.getCompanyNameMap(),onAutocomplete:function(t){const s=e.findCompanyAliasByName(t);I.addChecked(t,s),P.val(""),U.searchAndRender()}}),A.autocomplete({data:e.getCityNameMap(),onAutocomplete:function(t){const s=e.findCityAliasByName(t);G.addChecked(t,s),A.val(""),U.searchAndRender()}}),I.render(t,j.getCriteriaByName(h)),G.render(e.getCities(),j.getCriteriaByName(c)),F.attr("placeholder",function(t){const e=ht(t);return ht(e.vacancies).title}(t)),P.attr("placeholder",ht(t).name)}));U.start();const H=$(".js-container"),W=new g.ResultCountComponent(new y.SubmitAction(function(){U.renderAfterSearch()})),Z=function(){W.setTop($(this).offset().top-H.offset().top),W.showCount(U.searchAndCount())},K=function(t){t.keyCode===e&&U.searchAndRender()};N.on("change",Z),B.on("change",Z),D.on("change",Z),z.on("change",Z),R.on("change","input",Z),V.on("change","input",Z),E.on("keyup",K),T.on("keyup",K),$("#js-search-submit").click(function(){U.searchAndRender()}),F.on("keyup",function(s){s.keyCode===e&&(U.searchAndRender(),q.close()),s.keyCode===t&&q.close()}),$("#js-tabs").tabs(),$("#js-select-result-tab").click(function(){U.selectResultTab()}),$("#js-select-map-tab").click(function(){U.selectGoogleMapTab()})});class _{group(t){return function(t){const e=new p.LocationListMap;for(let s of t)for(let t of s.offices){const i=E(t,s.vacancies);0!==i.length&&e.add(t.location.latitude,t.location.longitude,new B(s.alias,s.name,[t],i,s.review_count,s.employee_count,s.type))}return e}(t)}}class O extends m.GroupMarker{getTitle(){const t=[];for(let e of this.list)t.push(e.name);return t.join(" | ")}getContent(){const t=[];for(let e of this.list){const s=[];for(let t of e.vacancies)s.push('<a href="'+D(e.alias,t.id)+'" target="_blank">'+t.title+"</a>"+I(t.salary));const i=e.offices[0],n=`<div class="infowindow"><a class="infowindow-company" href=${z(e.alias)} target="_blank">${e.name}</a></br><p class="infowindow-address">${i.address}</p>${s.join("<br/>")}</div>`;t.push(n)}return t.join("<br/><br/>")}}class x{unzip(t){return function(t){const e=t.length,s=new Array(e);for(let i=0;i<e;i++){const e=t[i];s[i]=new B(e[0],e[1],F(e[2]),P(e[3]),e[4],e[5],e[6])}return s}(t)}}function F(t){const e=t.length,s=new Array(e);for(let i=0;i<e;i++){const e=t[i];s[i]=new R(A(e[0]),e[1],e[2])}return s}function P(t){const e=t.length,s=new Array(e);for(let i=0;i<e;i++){const e=t[i];s[i]=new V(e[0],e[1],N(e[2]),e[3],e[4],e[5])}return s}function A(t){return new L(t[0],t[1])}function N(t){return t.map(A)}class B{constructor(t,e,s,i,n,r,a){this.alias=t,this.name=e,this.offices=s,this.vacancies=i,this.review_count=n,this.employee_count=r,this.type=a}}class L{constructor(t,e){this.alias=t,this.name=e}}class R{constructor(t,e,s){this.city=t,this.address=e,this.location=new b.Location(s[0],s[1])}}class V{constructor(t,e,s,i,n,r){this.id=t,this.title=e,this.cities=s,this.existsOffice=i,this.salary=n,this.published=r}}function E(t,e){const s=[];for(let i=0;i<e.length;i++){const n=e[i];(!1===n.existsOffice||T(n.cities,[t.city]))&&s.push(n)}return s}function T(t,e){for(let n=0;n<e.length;n++)for(let r=0;r<t.length;r++)if(s=t[r],i=e[n],s.alias===i.alias||s.name===i.name)return!0;var s,i;return!1}function D(t,e){return`https://jobs.dou.ua/companies/${t}/vacancies/${e}/`}function z(t){return`https://jobs.dou.ua/companies/${t}/`}function I(t){return t?" ("+t+")":""}class G{match(t){return t.review_count>0}}class q extends C.MultiSelectMatcher{match(t){return this.aliasMap.hasOwnProperty(t.employee_count)}}class U extends C.MultiSelectMatcher{match(t){return this.aliasMap.hasOwnProperty(t.type)}}class H{constructor(t){this.matcher=t}modify(t){const e=[],s=this.matcher;for(let i=0;i<t.vacancies.length;i++){const n=t.vacancies[i];s(n)&&e.push(n)}return e.length>0?new B(t.alias,t.name,t.offices,e,t.review_count,t.employee_count,t.type):null}}class W extends H{constructor(t){const e=t.toLowerCase();super(function(t){return-1!==t.title.toLowerCase().indexOf(e)})}}class Z extends H{constructor(t){let{from:e,to:s}=t;0===s&&(s=Number.MAX_SAFE_INTEGER),super(function(t){return""!==t.salary&&function(t,e,s){const i=t.split("–"),n=[];for(let t=0;t<i.length;t++){const r=parseInt(i[t].replace(/\D/g,""),10);if(K(e,s,r))return!0;n.push(r)}1===n.length&&(n[1]=n[0]);return K(n[0],n[1],e)||K(n[0],n[1],s)}(t.salary,e,s)})}}function K(t,e,s){return t<=s&&s<=e}class J extends o.CheckboxFilterMatchBuilder{constructor(t,e){super(t,e,G)}}class X{constructor(t,e,s){if(null!==e){const s=S.createAliasMap(e);t.each(function(){const t=$(this),e=t.attr("data-alias");s.hasOwnProperty(e)&&t.attr("checked","checked")})}this.$checkboxes=t,this.className=s}build(){const t=i.getCheckedAliases(this.$checkboxes);return t.length>0?new h.FilterStateMatcher(l.FilledFilterState(t),new this.className(t)):h.NullFilterStateMatcherObject}}class Y extends X{constructor(t,e){super(t,e,q)}}class Q extends X{constructor(t,e){super(t,e,U)}}class tt{constructor(t,e){this.$element=t,null!==e&&this.$element.val(e)}build(){const t=this.$element.val();return t.length>0?new d.FilterStateModifier(l.FilledFilterState(t),new W(t)):d.NullFilterStateModifierObject}}class et{constructor(t,e){this.aliasMap=S.createAliasMap(t),this.state=e}modify(t){const e=[],s=[];for(let i=0;i<t.offices.length;i++){const n=t.offices[i];this.aliasMap.hasOwnProperty(n.city.alias)===this.state&&(e.push(n),s.push(n.city))}if(0===e.length)return null;const i=[];for(let e=0;e<t.vacancies.length;e++){const n=t.vacancies[e];(!1===n.existsOffice||T(n.cities,s))&&i.push(n)}return 0===i.length?null:new B(t.alias,t.name,e,i,t.review_count,t.employee_count,t.type)}}class st{constructor(t){this.$element=t}build(){const t=j.createAliasStateMapByCheckboxes($("input",this.$element));return t.selected.length?new d.FilterStateModifier(l.FilledFilterState(t.aliasStateMap),new et(t.selected,!0)):t.disabled.length?new d.FilterStateModifier(l.FilledFilterState(t.aliasStateMap),new et(t.disabled,!1)):d.NullFilterStateModifierObject}}function it(t){return t>9?t:"0"+t}class nt extends H{constructor(){const t=function(t){const e=864e5*t,s=new Date;return s.setTime(s.getTime()-e),`${s.getFullYear()}-${it(s.getMonth()+1)}-${it(s.getDate())}`}(7);super(function(e){return e.published>=t})}}class rt extends c.CheckboxStateModifierBuilder{constructor(t,e){super(t,e,nt)}}class at{constructor(t,e,{from:s,to:i}={from:0,to:0}){this.$salaryFrom=t,this.$salaryTo=e,s>0&&this.$salaryFrom.val(s),i>0&&this.$salaryTo.val(i)}build(){const t=parseInt(this.$salaryFrom.val()||"0",10),e=parseInt(this.$salaryTo.val()||"0",10);if(isNaN(t)||isNaN(e)||t<0||e<0||t>e&&e>0||0===t&&0===e)return d.NullFilterStateModifierObject;const s={from:t,to:e};return new d.FilterStateModifier(l.FilledFilterState(s),new Z(s))}}class ot{constructor(t,e,s){this.$vacancyCount=t,this.$companyCount=e,this.$duration=s}render(t){this.$duration.html(t.getDuration()),this.$vacancyCount.html(function(t){const e=t.getResult();let s=0;for(let t=0;t<e.length;t++)s+=e[t].vacancies.length;return s}(t)),this.$companyCount.html(t.getCount())}}class ct{constructor(t){const e={},s={},i={},n={},r={},a=[];for(let o=0;o<t.length;o++){const c=t[o];e[c.name]=null,n[c.name]=c.alias;const l=c.vacancies;for(let t=0;t<l.length;t++){const e=l[t];s[e.title]=null;for(let t=0;t<e.cities.length;t++){const s=e.cities[t];""!==s.alias&&!1===i.hasOwnProperty(s.name)&&(i[s.name]=null,r[s.name]=s.alias,a.push(s))}}}this.companyNameMap=e,this.vacancyNameMap=s,this.cityNameMap=i,this.companyNameAliasMap=n,this.cityNameAliasMap=r,this.cities=a}getCompanyNameMap(){return this.companyNameMap}getCityNameMap(){return this.cityNameMap}getCities(){return this.cities}getVacancyNameMap(){return this.vacancyNameMap}findCompanyAliasByName(t){return this.companyNameAliasMap.hasOwnProperty(t)?this.companyNameAliasMap[t]:""}findCityAliasByName(t){return this.cityNameAliasMap.hasOwnProperty(t)?this.cityNameAliasMap[t]:""}}class lt{constructor(t,e){this.$element=t,this.urlStateContainer=e}render(t){const e=t.getResult(),s=this.urlStateContainer.getCenter();e.sort(function(t,e){return b.distance(t.offices[0].location,s)-b.distance(e.offices[0].location,s)});const i=[],n=Math.min(e.length,20);for(let t=0;t<n;t++)i.push(ut(e[t]));this.$element.html(i.join(""))}setOpenEventPublisher(t){this.$element.on("click","a.js-show-marker",function(e){const s=$(e.target),i=s.attr("data-location-latitude"),n=s.attr("data-location-longitude"),r=new v.OpenEvent(new b.Location(parseFloat(i),parseFloat(n)));t.openEventPublish(r)})}}function ut(t){const e=t.offices[0].location,s=[];for(let e=0;e<t.vacancies.length;e++){const i=t.vacancies[e];s.push(`<p><a href="${D(t.alias,i.id)}" target="_blank">${i.title}</a></p>`)}return`\n        <div class="row">\n            <div class="col s12 work-block z-depth-2 card-panel hoverable">\n                <div class="col s12 header">\n                    <div class="title">\n                        <a href="${z(t.alias)}" target="_blank">${t.name}</a>\n                        <a href="javascript:void(0);" class="js-show-marker" data-location-latitude="${e.latitude}" data-location-longitude="${e.longitude}" title="показати на карті">📌</a>\n                    </div>\n                </div>\n                <div class="col s12 message">\n                    ${s.join("")}\n                </div>\n            </div>\n        </div>\n    `}function ht(t){const e=t.length-1;return t[Math.floor(Math.random()*e)]}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.OpenEvent=class{constructor(t){this.location=t}}}]);